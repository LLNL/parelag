<!-- This is an example parameter list in which I've tried to include
     every parameter for every component that I could
     remember. Individual applications will certainly only require a
     subset of these. However, no application should complain that
     there are too many parameters in a given list; rather, extraneous
     parameters should be (silently!) ignored. -->
<ParameterList name="Default">
  <ParameterList name="Problem parameters">

    <!-- Mesh name -->
    <Parameter name="Mesh file" type="string"
               value="/home/lautrec/sources/parelag/meshes/cube_hex.mesh"/>

    <!-- Number of times to refine in serial. Set to -1 to refine the
         minimum amount of times to probably get a good parallel
         distribution (experimentally, until the number of elements is
         six times the number of processes in the communicator). -->
    <Parameter name="Serial refinement levels" type="int" value="2"/>

    <!-- Number of times to refine in parallel. This determines the
         number of levels in the AMGe hierarchy. -->
    <Parameter name="Parallel refinement levels" type="int" value="1"/>

    <Parameter name="Start form" type="int" value="0" />

    <Parameter name="Solve form" type="int" value="1" />

    <Parameter name="Use METIS for parallel partitioning" type="bool" value="true" />

    <!-- Level in the AMGe hierarchy at which to solve the problem. -->
    <Parameter name="Solve level" type="int" value="0"/>

    <!-- The linear solver to use to solve the problem at "Solve level". -->
    <Parameter name="Linear solver" type="string"
               value="MINRES-BlkJacobi-GS-AMG"/>
    <Parameter name="Linear solver 1-Form" type="string"
               value="PCG with Auxiliary Space Preconditioner"/>
    <!-- <Parameter name="Linear solver 1-Form" type="string"
               value="CG-AMG"/> -->

    <!-- The order of the Hdiv and L2 finite element spaces. H1 and
         Hcurl will have order one higher than this. -->
    <Parameter name="Finite element order" type="int" value="0"/>

    <!-- Order of polynomials to include in the upscaled spaces. -->
    <Parameter name="Upscaling order" type="int" value="0"/>

    <!-- Whether or not to apply a mesh deformation. -->
    <Parameter name="Deformation" type="bool" value="false"/>

    <!-- Max number of levels of the DeRhamSequence hierarchy. -->
    <Parameter name="Hierarchy levels" type="int" value="5"/>

    <!-- If value="true", use METIS for unstructured coarsening
         (Beware: can be problematic).
         Else, use derefinement to build the hierarchy. -->  
    <Parameter name="Unstructured coarsening" type="bool" value="false" />

    <Parameter name="Use geometric coarsening" type="bool" value="true" />

    <!-- Coarsening factor of the DeRhamSequence hierarchy. -->
    <Parameter name="Hierarchy coarsening factor" type="int" value="8"/>

    <!-- Coarsening factor of processors if redistribution is triggered. -->
    <Parameter name="Processor coarsening factor" type="int" value="3"/>

    <!-- Control how the redistribution is handled, either keep the excess
         processors idleing or distribute copies to run concurrently -->
    <Parameter name="Distribute multiple copies" type="bool" value="false" />

    <!-- Control whether to visualize all coarse copies or just one realization -->
    <Parameter name="Visualize multiple copies" type="bool" value="false" />

    <!-- When the minimum of nonzero number of local elements on a particular
         level is below this threshold, redistribution will be triggered. -->
    <Parameter name="Local elements threshold" type="int" value="80"/>

    <!-- When the number of global elements on a particular level is below
         this threshold, coarsening will be terminated. -->
    <Parameter name="Global elements threshold" type="int" value="1"/>

  </ParameterList>
  <!-- ParameterList "Problem parameters" -->

  <!-- Control the visualization and timing output -->
  <ParameterList name="Output control">
    <!-- Control whether the solution should be displayed via GLVis. A
         GLVis server must be listening or this will fail. -->
    <Parameter name="Visualize solution" type="bool" value="true"/>

    <!-- Control whether timing information is summarized at the end
         of a run. -->
    <Parameter name="Print timings" type="bool" value="true"/>

    <!-- Control whether to print progress information from rank 0 to
         stdout during the course of a run. -->
    <Parameter name="Show progress" type="bool" value="true"/>
  </ParameterList>
  <!-- ParameterList "Output control" -->

  <!-- Define a library of available preconditioners -->
  <ParameterList name="Preconditioner Library">

    <!-- MINRES preconditioned with block-Jacobi preconditioner. -->
    <ParameterList name="MINRES-BlkJacobi-GS-AMG">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="MINRES"/>
        <Parameter name="Preconditioner" type="string"
                   value="BlkJacobi-GS-AMG"/>
        <Parameter name="Print level" type="int" value="-1"/>
        <Parameter name="Maximum iterations" type="int" value="50"/>
        <Parameter name="Relative tolerance" type="double" value="1e-6"/>
        <Parameter name="Absolute tolerance" type="double" value="1e-6"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "MINRES-BlkJacobi-GS-AMG" -->

    <!-- Hybridization solver with BoomerAMG preconditioned CG. -->
    <ParameterList name="Hybridization-Darcy-CG-AMG">
      <Parameter name="Type" type="string" value="Hybridization"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Hybridization strategy" type="string" value="Darcy"/>
        <Parameter name="Solver" type="string" value="CG-AMG"/>
        <Parameter name="RescaleIteration" type="int" value="-20"/>
        <Parameter name="Forms" type="vector_int" value="1 2"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "Hybridization-Darcy-CG-AMG" -->

    <!-- GMRES preconditioned with block-Jacobi preconditioner as a
         coarse-grid solver. This won't work super well. :/ -->
    <ParameterList name="GMRES-AMGe-BlkJacobi-GS-AMG">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="GMRES"/>
        <Parameter name="Preconditioner" type="string"
                   value="AMGe-BlkJacobi-GS-AMG"/>
        <Parameter name="Print level" type="int" value="1"/>
        <Parameter name="Maximum iterations" type="int" value="5000"/>
        <Parameter name="Relative tolerance" type="double" value="1e-6"/>
        <Parameter name="Absolute tolerance" type="double" value="1e-6"/>
        <Parameter name="Restart size" type="int" value="200"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "GMRES-AMGe-BlkJacobi-GS-AMG_CG" -->

    <!-- AMGe for the Darcy problem using Block-Jacobi as a smoother. -->
    <ParameterList name="AMGe-BlkJacobi-GS-AMG">
      <Parameter name="Type" type="string" value="AMGe"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Maximum levels" type="int" value="-1"/>
        <Parameter name="Forms" type="vector_int" value="1 2"/>
        <Parameter name="PreSmoother" type="string" value="BlkJacobi-GS-AMG"/>
        <Parameter name="PostSmoother" type="string" value="BlkJacobi-GS-AMG"/>
        <Parameter name="Coarse solver" type="string"
                   value="MINRES-BlkJacobi-GS-AMG"/>
        <Parameter name="Cycle type" type="string" value="V-cycle"/>
      </ParameterList>
      <!-- ParameterList "Parameters" -->
    </ParameterList>
    <!-- ParameterList "AMGe-BS-GS" -->

    <!-- A block-Jacobi type preconditioner with Gauss-Seidel smoothing
         for the A^{-1} solver and BoomerAMG for the S^{-1}
         solver. Also, uses diag(A)^{-1} to compute S explicitly. -->
    <ParameterList name="BlkJacobi-GS-AMG">
      <Parameter name="Type" type="string" value="Block Jacobi"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="A00 Inverse" type="string" value="Gauss-Seidel"/>
        <Parameter name="A11 Inverse" type="string" value="BoomerAMG Solver"/>

        <Parameter name="Alpha" type="double" value="1.0"/>
        <Parameter name="S Type" type="string" value="Diagonal"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "Block Jacobi GS" -->

    <!-- GMRES preconditioned with block-Jacobi preconditioner as a
         coarse-grid solver. This won't work super well. :/ -->
    <ParameterList name="GMRES-BlkJacobi-GS-AMG_CG">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="GMRES"/>
        <Parameter name="Preconditioner" type="string"
                   value="BlkJacobi-GS-AMG"/>
        <Parameter name="Print level" type="int" value="-1"/>
        <Parameter name="Maximum iterations" type="int" value="5"/>
        <Parameter name="Relative tolerance" type="double" value="0.0"/>
        <Parameter name="Absolute tolerance" type="double" value="0.0"/>
        <Parameter name="Restart size" type="int" value="50"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "GMRES-BlkJacobi-GS-AMG_CG" -->

    <!-- Conjugate gradient preconditioned with BoomerAMG. -->
    <ParameterList name="CG-AMG">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="PCG"/>
        <Parameter name="Preconditioner" type="string"
                   value="BoomerAMG Solver"/>
        <Parameter name="Print level" type="int" value="1"/>
        <Parameter name="Maximum iterations" type="int" value="5000"/>
        <Parameter name="Relative tolerance" type="double" value="1e-6"/>
        <Parameter name="Absolute tolerance" type="double" value="1e-8"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "CG-AMG" -->

    <!-- L1 Gauss-Seidel preconditioner -->
    <ParameterList name="Gauss-Seidel">
      <Parameter name="Type" type="string" value="Hypre"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Type" type="string" value="L1 Gauss-Seidel"/>
        <Parameter name="Sweeps" type="int" value="1"/>
        <Parameter name="Damping Factor" type="double" value="1.0"/>
        <Parameter name="Omega" type="double" value="1.0"/>
        <Parameter name="Cheby Poly Order" type="int" value="2"/>
        <Parameter name="Cheby Poly Fraction" type="double" value="0.3"/>
      </ParameterList>
      <!-- ParameterList "Parameters" -->
    </ParameterList>
    <!-- ParameterList "Gauss-Seidel" -->

    <!-- BoomerAMG preconditioner -->
    <ParameterList name="BoomerAMG Solver">
      <Parameter name="Type" type="string" value="BoomerAMG"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Coarsening type" type="int" value="10"/>
        <Parameter name="Aggressive coarsening levels" type="int" value="1"/>
        <Parameter name="Relaxation type" type="int" value="8"/>
        <Parameter name="Theta" type="double" value="0.25"/>
        <Parameter name="Interpolation type" type="int" value="6"/>
        <Parameter name="P max" type="int" value="4"/>
        <Parameter name="Print level" type="int" value="0"/>
        <Parameter name="Number of functions" type="int" value="1"/>
        <Parameter name="Maximum levels" type="int" value="25"/>
        <Parameter name="Tolerance" type="double" value="0.0"/>
        <Parameter name="Maximum iterations" type="int" value="1"/>
      </ParameterList>
      <!-- End ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- End ParameterList "BoomerAMG Solver" -->

    <!-- Sequential SuperLU sparse direct solver -->
    <ParameterList name="SuperLU">
      <Parameter name="Type" type="string" value="Direct"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Name" type="string" value="SuperLU"/>
        <!-- There are plenty. I don't remember right now. -->
      </ParameterList>
      <!-- ParameterList "Parameters" -->
    </ParameterList>
    <!-- ParameterList "SuperLU" -->

    <!-- PCG preconditioned with a multilevel auxiliary space
         preconditioner. This is the correct preconditioner for this
         problem, and its performance should be superior to that of
         the AMGe-GS preconditioner. -->
    <ParameterList name="PCG with Auxiliary Space Preconditioner">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="PCG"/>
        <Parameter name="Preconditioner" type="string"
                   value="AMGe-HIP-GS_1"/>
        <Parameter name="Print level" type="int" value="1"/>
        <Parameter name="Maximum iterations" type="int" value="300"/>
        <Parameter name="Relative tolerance" type="double"
                   value="1e-6"/>
        <Parameter name="Absolute tolerance" type="double"
                   value="1e-6"/>
        <Parameter name="Restart size" type="int" value="50"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "PCG with AMGe-GS Preconditioner" -->

    <!-- AMGe for the 1-form (H(curl)) problem using Hiptmair
        (auxiliary space) smoothing with L1 Gauss-Seidel for the
        primary and the auxiliary solver for the pre- and
        post-smoothing steps, with AMG-preconditioned CG for the
        coarse-grid solve -->
    <ParameterList name="AMGe-HIP-GS_1">
      <Parameter name="Type" type="string" value="AMGe"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Maximum levels" type="int" value="-1"/>
        <Parameter name="Forms" type="vector_int" value="1"/>
        <Parameter name="PreSmoother" type="string" value="Hiptmair-GS-GS"/>
        <Parameter name="PostSmoother" type="string" value="Hiptmair-GS-GS"/>
        <Parameter name="Coarse solver" type="string" value="PCG-AMG-coarse"/>
        <Parameter name="Cycle type" type="string" value="V-cycle"/>
      </ParameterList>
      <!-- ParameterList "Parameters" -->
    </ParameterList>
    <!-- ParameterList "AMGe-HIP-GS_1" -->

      <!-- Conjugate gradient preconditioned with BoomerAMG. -->
    <ParameterList name="PCG-AMG">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="PCG"/>
        <Parameter name="Preconditioner" type="string"
                   value="BoomerAMG Solver"/>
        <Parameter name="Print level" type="int" value="-1"/>
        <Parameter name="Maximum iterations" type="int" value="5000"/>
        <Parameter name="Relative tolerance" type="double" value="1e-6"/>
        <Parameter name="Absolute tolerance" type="double" value="1e-8"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "CG-AMG" -->

    <!-- Conjugate gradient preconditioned with BoomerAMG as a coarse solver matching PCG-AMS. -->
    <ParameterList name="PCG-AMG-coarse">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="PCG"/>
        <Parameter name="Preconditioner" type="string"
                   value="BoomerAMG Solver"/>
        <Parameter name="Print level" type="int" value="-1"/>
        <Parameter name="Maximum iterations" type="int" value="3"/>
        <Parameter name="Relative tolerance" type="double" value="1e-4"/>
        <Parameter name="Absolute tolerance" type="double" value="1e-4"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "CG-AMG" -->

    <!-- Hiptmair smoother with L1 Gauss-Seidel as the primary and
         auxiliary space smoother -->
    <ParameterList name="Hiptmair-GS-GS">
      <Parameter name = "Type" type="string" value="Hiptmair"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Primary Smoother" type="string"
                   value="Gauss-Seidel"/>
        <Parameter name="Auxiliary Smoother" type="string"
                   value="Gauss-Seidel"/>
      </ParameterList>
      <!-- ParameterList "Parameters" -->
    </ParameterList>
    <!-- ParameterList "Hiptmair-GS-GS" -->

    <!-- PCG preconditioned with AMS preconditioner -->
    <ParameterList name="PCG-AMS">
      <Parameter name="Type" type="string" value="Krylov"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Solver name" type="string" value="PCG"/>
        <Parameter name="Preconditioner" type="string" value="AMS Solver"/>
        <Parameter name="Print level" type="int" value="-1"/>
        <Parameter name="Maximum iterations" type="int" value="3"/>
        <Parameter name="Relative tolerance" type="double"
                   value="1e-4"/>
        <Parameter name="Absolute tolerance" type="double"
                   value="1e-4"/>
        <Parameter name="Restart size" type="int" value="50"/>
      </ParameterList>
      <!-- ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- ParameterList "PCG-AMS" -->

    <!-- AMS preconditioner -->
    <ParameterList name="AMS Solver">
      <Parameter name="Type" type="string" value="AMS"/>
      <ParameterList name="Solver Parameters">
        <Parameter name="Cycle type" type="int" value="13"/>
        <Parameter name="Tolerance" type="double" value="0.0"/>
        <Parameter name="Maximum iterations" type="int" value="1"/>
        <Parameter name="Relaxation type" type="int" value="2"/>
        <Parameter name="Relaxation sweeps" type="int" value="1"/>
        <Parameter name="Relaxation weight" type="double" value="1.0"/>
        <Parameter name="Relaxation omega" type="double" value="1.0"/>
        <Parameter name="Beta is zero" type="bool" value="false"/>
        <ParameterList name="PtAP AMG Parameters">
          <Parameter name="Coarsening type" type="int" value="10"/>
          <Parameter name="Aggressive coarsening levels" type="int" value="1"/>
          <Parameter name="Relaxation type" type="int" value="8"/>
          <Parameter name="Theta" type="double" value="0.25"/>
          <Parameter name="Interpolation type" type="int" value="6"/>
          <Parameter name="P max" type="int" value="4"/>
          <Parameter name="Print level" type="int" value="0"/>
          <Parameter name="Number of functions" type="int" value="1"/>
          <Parameter name="Maximum levels" type="int" value="25"/>
        </ParameterList>
        <!-- End ParameterList "PtAP AMG Parameters" -->
        <ParameterList name="GtAG AMG Parameters">
          <Parameter name="Coarsening type" type="int" value="10"/>
          <Parameter name="Aggressive coarsening levels" type="int" value="1"/>
          <Parameter name="Relaxation type" type="int" value="8"/>
          <Parameter name="Theta" type="double" value="0.25"/>
          <Parameter name="Interpolation type" type="int" value="6"/>
          <Parameter name="P max" type="int" value="4"/>
          <Parameter name="Print level" type="int" value="0"/>
          <Parameter name="Number of functions" type="int" value="1"/>
          <Parameter name="Maximum levels" type="int" value="25"/>
        </ParameterList>
        <!-- End ParameterList "GtAG AMG Parameters" -->
      </ParameterList>
      <!-- End ParameterList "Solver Parameters" -->
    </ParameterList>
    <!-- End ParameterList "AMS Solver" -->

  </ParameterList>
  <!-- ParameterList "Preconditioner Library" -->
</ParameterList>
<!-- ParameterList "Default" -->